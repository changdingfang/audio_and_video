


+-----------------+--------------------+-----------+
|                 |          F         |   8bits   |
|                 +--------------------+-----------+
|                 |          L         |   8bits   |
|                 +--------------------+-----------+
|                 |          V         |   8bits   |
|                 +--------------------+-----------+
|                 |        version     |   8bits   |
|                 +--------------------+-----------+
|    header       |  typeFlagsReserved |   5bits   |
|                 +--------------------+-----------+
|                 |   typeFlagsAudio   |   1bit    |
|                 +--------------------+-----------+
|                 |  typeFlagsReserved |   1bit    |
|                 +--------------------+-----------+
|                 |   typeFlagsVideo   |   1bit    |
|                 +--------------------+-----------+
|                 |   DataOffset       |   32bits  |
+-----------+-----+--------------------+-----------+
|          |      previousTagSize      |   32bits  |
|          +------+--------------------+-----------+
|          |      |      tagType       |   8bits   |
|          |      +--------------------+-----------+
|          |      |      dataSize      |   24bits  |
|          |      +--------------------+-----------+
|          |      |      timestamp     |   24bits  |
|          | tag1 +--------------------+-----------+
|          |      |  timestampExtended |   8bits   |
|          |      +--------------------+-----------+
|   body   |      |      streamID      |   24bits  |
|          |      +--------------------+-----------+
|          |      |        data        |           |
|          +------+--------------------+-----------+
|          |      previousTagSize      |   32bits  |
|          +------+--------------------+-----------+
|          | tag2 |      ... ...       |  ... ...  |
|          +------+--------------------+-----------+
|          |      previousTagSize      |   32bits  |
|          +------+--------------------+-----------+
|          
|              ...         ...             ...
|
|          +------+--------------------+-----------+
|          | tagn |      ... ...       |  ... ...  |
|          +------+--------------------+-----------+
|          |      previousTagSize      |   32bits  |
+----------+------+--------------------+-----------+


tagType是音频信息
data的第一个字节
+-------------+-------+-----+--------------------------------+
|             |       |  0  |   Linear PCM, platform endian  |
|             |       +-----+--------------------------------+
|             |       |  1  |             ADPCM              |
|             |       +-----+--------------------------------+
|             |       |  2  |              MP3               |
|             |       +-----+--------------------------------+
|             |       |  3  |    Linear PCM, little endian   |
|             |       +-----+--------------------------------+
|             |       |  4  |     Nellymoser 16-kHz mono     |
|             |       +-----+--------------------------------+
|             |       |  5  |     Nellymoser 8-kHz mono      |
|             |       +-----+--------------------------------+
|             |       |  6  |           Nellymoser           |
|             |       +-----+--------------------------------+
|   音频格式  | 4bits |  7  |   G.711 A-law logarithmic PCM  |
|             |       +-----+--------------------------------+
|             |       |  8  |   G.711 mu-law logarithmic PCM |
|             |       +-----+--------------------------------+
|             |       |  9  |            reserved            |
|             |       +-----+--------------------------------+
|             |       |  10 |              AAC               |
|             |       +-----+--------------------------------+
|             |       |  11 |             Speex              |
|             |       +-----+--------------------------------+
|             |       |  14 |            MP3 8-kHz           |
|             |       +-----+--------------------------------+
|             |       |  15 |      Device-specific sound     |
+-------------+-------+-----+--------------------------------+
|             |       |  0  |            6.6-kHz             |
|             |       +-----+--------------------------------+
|             |       |  1  |            11-kHz              |
|             |       +-----+--------------------------------+
|    采样率   | 2bits |  2  |            22-kHz              |
|             |       +-----+--------------------------------+
|             |       |  3  |            44-kHz              |
|             |       |     |            (对于AAC总是3)      |
+-------------+-------+-----+--------------------------------+
|             |       |  0  |            snd8Bit             |
|             |       +-----+--------------------------------+
|   采样长度  |  1bit |  1  |            snd16Bit            |
|             |       |     |     (压缩过的音频都是16bit)    |
+-------------+-------+-----+--------------------------------+
|             |       |  0  |            sndMono             |
|             |       +-----+--------------------------------+
|   音频类型  |  1bit |  1  |            sndStereo           |
|             |       |     |            (对于AAC总是1)      |
+-------------+-------+-----+--------------------------------+

tagType是视频信息
data的第一个字节
+-------------+-------+-----+---------------------------------------------------+
|             |       |  1  |         keyframe (for AVC, a seekable frame)      |
|             |       +-----+---------------------------------------------------+
|             |       |  2  |      inter frame (for AVC, a non-seekable frame)  |        
|             |       +-----+---------------------------------------------------+
|    帧类型   | 4bits |  3  |         disposable inter frame (H.253 only)       |
|             |       +-----+---------------------------------------------------+
|             |       |  4  | generated keyframe (reserved for server use only) |
|             |       +-----+---------------------------------------------------+
|             |       |  5  |          video info/command frame                 |  
+-------------+-------+-----+---------------------------------------------------+
|             |       |  1  |            JPEG (currently unused)                |
|             |       +-----+---------------------------------------------------+
|             |       |  2  |               Sorenson H.263                      |
|             |       +-----+---------------------------------------------------+
|    编码ID   | 4bits |  3  |                Screen video                       |
|             |       +-----+---------------------------------------------------+
|             |       |  4  |                  On2 VP6                          |
|             |       +-----+---------------------------------------------------+
|             |       |  5  |           On2 VP6 with alpha channel              |
|             |       +-----+---------------------------------------------------+
|             |       |  6  |             Screen video version 2                |
|             |       +-----+---------------------------------------------------+
|             |       |  7  |                      AVC                          |
+-------------+-------+-----+---------------------------------------------------+


tagType是脚本信息
该类型的tag通常被称为Metadata Tag
data的第一个字节

常见的MetaData
+-----------------+----------------+
|       值        |     含义       |
+-----------------+----------------+
|    duration     |      时长      |
+-----------------+----------------+
|    width        |    视频宽度    |
+-----------------+----------------+
|    height       |    视频高度    |
+-----------------+----------------+
|  videodatarate  |    视频码率    |
+-----------------+----------------+
|    framerate    |    视频帧率    |
+-----------------+----------------+
|  videocodecid   |  视频编码方式  |
+-----------------+----------------+
| audiosamplerate |  音频采样率    |
+-----------------+----------------+
| audiosamplesize |  音频采样精度  |
+-----------------+----------------+
|     stereo      |  是否为立体声  |
+-----------------+----------------+
|  audiocodecid   |  音频编码方式  |
+-----------------+----------------+
|    filesize     |    文件大小    |
+-----------------+----------------+



